    :root{
      --bg1:#020617;--bg2:#020617;--bg3:#0f172a;
      --card:rgba(255,255,255,.05);
      --border:rgba(255,255,255,.12);
      --muted:rgba(255,255,255,.7);
      --good:rgba(34,197,94,.18);
      --mod:rgba(245,158,11,.18);
      --bad:rgba(239,68,68,.18);
      --ring:rgba(255,255,255,.12);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      background:linear-gradient(to bottom,var(--bg1),var(--bg2),var(--bg3));
      color:#fff; min-height:100vh;
    }
    a{text-decoration:none;color:inherit}
    .wrap{max-width:1100px;margin:auto;padding:32px 16px 48px}
    header{display:flex;flex-wrap:wrap;gap:16px;justify-content:space-between;align-items:flex-end;margin-bottom:32px}
    .kicker{font-size:11px;letter-spacing:.2em;text-transform:uppercase;opacity:.6}
    h1{margin:6px 0 0;font-size:28px;font-weight:600}
    .subtitle{margin-top:6px;font-size:14px;color:var(--muted);max-width:760px}
    .actions{display:flex;gap:8px;flex-wrap:wrap}
    .btn{padding:10px 16px;border-radius:14px;font-size:14px;font-weight:800;border:1px solid var(--border);background:transparent}
    .btn.primary{background:#fff;color:#020617;border:none}
    .grid{display:grid;gap:16px}
    @media(min-width:900px){.grid.cols-3{grid-template-columns:repeat(3,1fr)}}
    .card{background:var(--card);border:1px solid var(--border);border-radius:18px;padding:16px; position:relative; overflow:hidden}
    .card h2{margin:0 0 12px;font-size:13px;text-transform:uppercase;letter-spacing:.04em}
    .temp{font-size:48px;font-weight:650;line-height:1}
    .muted{color:var(--muted);font-size:13px}
    .row{display:flex;justify-content:space-between;align-items:center;background:rgba(255,255,255,.04);padding:8px 10px;border-radius:12px;margin-bottom:6px;font-size:13px}
    button.city{all:unset;cursor:pointer}
    button.city:focus{outline:2px solid rgba(255,255,255,.35);outline-offset:2px;border-radius:12px}
    .fabGrid{display:grid;grid-template-columns:repeat(auto-fit,minmax(170px,1fr));gap:8px}
    footer{margin-top:48px;font-size:12px;opacity:.45}
    .metaRow{display:flex;flex-wrap:wrap;gap:10px;margin-top:10px}
    .pill{display:inline-flex;align-items:center;gap:8px;padding:8px 10px;border-radius:999px;border:1px solid var(--ring);background:rgba(255,255,255,.04);font-size:12px;color:rgba(255,255,255,.88)}
    .aqiChip{padding:6px 10px;border-radius:999px;border:1px solid var(--ring);font-weight:900;font-size:12px}
    .aqi-good{background:var(--good)}
    .aqi-mod{background:var(--mod)}
    .aqi-bad{background:var(--bad)}

    /* ===== Animated Weather Art (fills Right Now dead space) ===== */
    .wxArt{
      margin-top:14px;
      height:118px;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.10);
      background: radial-gradient(120px 80px at 20% 30%, rgba(255,255,255,.10), rgba(255,255,255,0)),
                  linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      position:relative;
      overflow:hidden;
    }
    .wxArt::after{
      content:"";
      position:absolute; inset:-2px;
      border-radius:18px;
      pointer-events:none;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.06);
    }

    /* shared bits */
    .wxMoon, .wxSun, .wxCloud, .wxFog, .wxBolt { position:absolute; }
    .wxStars { position:absolute; inset:0; opacity:.9; }
    .wxStars span{
      position:absolute; width:2px; height:2px; border-radius:50%;
      background:rgba(255,255,255,.85);
      animation: twinkle 2.8s ease-in-out infinite;
    }
    .wxStars span:nth-child(2n){ animation-duration:3.6s; opacity:.6 }
    .wxStars span:nth-child(3n){ animation-duration:4.4s; opacity:.5 }

    @keyframes twinkle { 0%,100%{ transform:scale(1); opacity:.55 } 50%{ transform:scale(1.8); opacity:1 } }

    .wxMoon{
      width:56px; height:56px; border-radius:50%;
      background: radial-gradient(circle at 35% 30%, rgba(255,255,255,.95), rgba(255,255,255,.70));
      top:18px; left:18px;
      box-shadow: 0 0 18px rgba(255,255,255,.15);
    }
    .wxMoon::after{
      content:"";
      position:absolute; width:50px; height:50px; border-radius:50%;
      top:10px; left:18px;
      background: rgba(2,6,23,.85);
    }
    .wxSun{
      width:58px; height:58px; border-radius:50%;
      background: radial-gradient(circle at 35% 30%, rgba(255,255,255,.95), rgba(255,255,255,.70));
      top:16px; left:18px;
      box-shadow: 0 0 22px rgba(255,255,255,.12);
      animation: floaty 3.6s ease-in-out infinite;
    }
    .wxSun::before{
      content:"";
      position:absolute; inset:-10px;
      border-radius:50%;
      border: 1px dashed rgba(255,255,255,.18);
      animation: spin 10s linear infinite;
    }
    @keyframes spin{ to{ transform:rotate(360deg) } }
    @keyframes floaty{ 0%,100%{ transform:translateY(0) } 50%{ transform:translateY(-4px) } }

    .wxCloud{
      width:140px; height:46px;
      background: rgba(255,255,255,.10);
      border: 1px solid rgba(255,255,255,.12);
      border-radius:999px;
      top:46px; left:84px;
      filter: blur(.0px);
      animation: drift 6.5s ease-in-out infinite;
    }
    .wxCloud::before{
      content:"";
      position:absolute; width:58px; height:58px; border-radius:50%;
      left:18px; top:-30px;
      background: rgba(255,255,255,.10);
      border: 1px solid rgba(255,255,255,.12);
    }
    .wxCloud::after{
      content:"";
      position:absolute; width:72px; height:72px; border-radius:50%;
      left:56px; top:-40px;
      background: rgba(255,255,255,.10);
      border: 1px solid rgba(255,255,255,.12);
    }
    @keyframes drift{ 0%,100%{ transform:translateX(0) } 50%{ transform:translateX(10px) } }

    .wxRain{
      position:absolute; left:0; right:0; bottom:0; top:0;
      pointer-events:none;
    }
    .wxRain i{
      position:absolute; width:2px; height:18px; border-radius:2px;
      background: rgba(255,255,255,.28);
      top:72px;
      animation: rain 0.9s linear infinite;
    }
    .wxRain i:nth-child(2n){ animation-duration:1.05s; opacity:.22 }
    .wxRain i:nth-child(3n){ animation-duration:0.8s; opacity:.26 }
    @keyframes rain{
      from{ transform:translateY(-18px) }
      to{ transform:translateY(58px) }
    }

    .wxSnow{
      position:absolute; inset:0; pointer-events:none;
    }
    .wxSnow i{
      position:absolute; width:6px; height:6px; border-radius:50%;
      background: rgba(255,255,255,.42);
      top:66px;
      animation: snow 2.6s linear infinite;
    }
    .wxSnow i:nth-child(2n){ animation-duration:3.2s; opacity:.35 }
    .wxSnow i:nth-child(3n){ animation-duration:2.2s; opacity:.30 }
    @keyframes snow{
      from{ transform:translateY(-10px) translateX(0) }
      to{ transform:translateY(62px) translateX(10px) }
    }

    .wxFog{
      left:-20px; right:-20px; top:60px; height:46px;
      background: linear-gradient(90deg, rgba(255,255,255,0), rgba(255,255,255,.10), rgba(255,255,255,0));
      opacity:.8;
      filter: blur(1px);
      animation: fog 3.2s ease-in-out infinite;
    }
    @keyframes fog{ 0%,100%{ transform:translateX(-10px) } 50%{ transform:translateX(10px) } }

    .wxBolt{
      width:0;height:0;
      border-left:10px solid transparent;
      border-right:10px solid transparent;
      border-top:24px solid rgba(255,255,255,.45);
      top:62px; left:155px;
      transform:skewX(-10deg);
      animation: flash 3.2s ease-in-out infinite;
      opacity:.2;
    }
    .wxBolt::after{
      content:"";
      position:absolute;
      left:-8px; top:-2px;
      width:0;height:0;
      border-left:8px solid transparent;
      border-right:8px solid transparent;
      border-top:18px solid rgba(255,255,255,.45);
      transform:translateX(8px) translateY(14px);
    }
    @keyframes flash{
      0%,78%,100%{ opacity:.10 }
      80%{ opacity:.85 }
      82%{ opacity:.15 }
      84%{ opacity:.65 }
      86%{ opacity:.12 }
    }

    /* hide/show scenes */
    .scene{ display:none; }
    .scene.on{ display:block; }

/* ===== Themes ===== */
/* ===== Themes ===== */
:root[data-theme="midnight"]{
  --bg1:#020617; --bg2:#020617; --bg3:#0f172a;
  --card:rgba(255,255,255,.05);
  --border:rgba(255,255,255,.12);
  --muted:rgba(255,255,255,.7);
}
:root[data-theme="dusk"]{
  --bg1:#0b1020; --bg2:#111827; --bg3:#1f2937;
  --card:rgba(255,255,255,.06);
  --border:rgba(255,255,255,.14);
  --muted:rgba(255,255,255,.75);
}
:root[data-theme="light"]{
  --bg1:#f8fafc; --bg2:#eef2ff; --bg3:#e2e8f0;
  --card:rgba(15,23,42,.04);
  --border:rgba(15,23,42,.12);
  --muted:rgba(15,23,42,.70);
}

/* Adapt text colors automatically in light mode */
:root[data-theme="light"] body{ color:#0f172a; }
:root[data-theme="light"] .btn{ color:#0f172a; }
:root[data-theme="light"] .btn.primary{ background:#0f172a; color:#fff; }
:root[data-theme="light"] .settings{ background: rgba(255,255,255,.92); color:#0f172a; }
:root[data-theme="light"] .gear{ background: rgba(15,23,42,.06); color:#0f172a; }

/* ===== Right Now sizing (0=default, 1=medium, 2=large) ===== */
:root[data-rn="1"] .temp{ font-size: 56px; }
:root[data-rn="2"] .temp{ font-size: 64px; }
:root[data-rn="1"] #place{ font-size: 14px; font-weight: 800; }
:root[data-rn="2"] #place{ font-size: 15px; font-weight: 900; }

/* ===== Settings gear + panel ===== */
.gear{
  position: fixed; top: 14px; right: 14px; z-index: 50;
  width: 44px; height: 44px; border-radius: 14px;
  border: 1px solid var(--border);
  background: rgba(255,255,255,.06);
  color: rgba(255,255,255,.92);
  font-size: 18px;
  display:flex; align-items:center; justify-content:center;
  cursor:pointer; backdrop-filter: blur(8px);
}
.gear:hover{ background: rgba(255,255,255,.10); }

.settings{
  position: fixed; top: 68px; right: 14px; z-index: 60;
  width: min(340px, calc(100vw - 28px));
  border-radius: 16px; border: 1px solid var(--border);
  background: rgba(2,6,23,.88);
  backdrop-filter: blur(10px);
  padding: 12px;
  box-shadow: 0 10px 30px rgba(0,0,0,.35);
  display:none;
}
.settings.open{ display:block; }

.settingsHead{ display:flex; align-items:center; justify-content:space-between; gap:10px; margin-bottom:10px; }
.settingsClose{
  all:unset; cursor:pointer;
  width:34px; height:34px;
  display:flex; align-items:center; justify-content:center;
  border-radius:12px;
  border:1px solid rgba(255,255,255,.14);
}
.settingsClose:hover{ background: rgba(255,255,255,.08); }

.settingRow{
  display:flex; align-items:center; justify-content:space-between; gap:12px;
  padding:10px; border-radius:12px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.04);
  margin-top:8px; font-size:13px;
}
.settingRow select, .settingRow input[type="range"]{ width:160px; }

/* ===== Themes ===== */
:root[data-theme="midnight"]{
  --bg1:#020617; --bg2:#020617; --bg3:#0f172a;
  --card:rgba(255,255,255,.05);
  --border:rgba(255,255,255,.12);
  --muted:rgba(255,255,255,.7);
}
:root[data-theme="dusk"]{
  --bg1:#0b1020; --bg2:#111827; --bg3:#1f2937;
  --card:rgba(255,255,255,.06);
  --border:rgba(255,255,255,.14);
  --muted:rgba(255,255,255,.75);
}
:root[data-theme="light"]{
  --bg1:#f8fafc; --bg2:#eef2ff; --bg3:#e2e8f0;
  --card:rgba(15,23,42,.04);
  --border:rgba(15,23,42,.12);
  --muted:rgba(15,23,42,.70);
}
:root[data-theme="light"] body{ color:#0f172a; }
:root[data-theme="light"] .btn{ color:#0f172a; }
:root[data-theme="light"] .btn.primary{ background:#0f172a; color:#fff; }
:root[data-theme="light"] .settings{ background: rgba(255,255,255,.92); color:#0f172a; }
:root[data-theme="light"] .gear{ background: rgba(15,23,42,.06); color:#0f172a; }

/* ===== Right Now sizing ===== */
:root[data-rn="1"] .temp{ font-size: 56px; }
:root[data-rn="2"] .temp{ font-size: 64px; }
:root[data-rn="1"] #place{ font-size: 14px; font-weight: 800; }
:root[data-rn="2"] #place{ font-size: 15px; font-weight: 900; }

/* Weather icon (Right now card) */
.wxIconWrap{
  margin-top:12px;
  display:flex;
  justify-content:center;
  align-items:center;
}
.wxIconWrap img{
  width:96px;
  height:96px;
  opacity:.95;
}

/* ===== FW_FANCY_THEMES ===== */

/* Default (dark) */
html[data-theme="dark"] body{
  background:linear-gradient(to bottom,var(--bg1),var(--bg2),var(--bg3));
}

/* Ocean */
html[data-theme="ocean"] body{
  background: radial-gradient(1200px 600px at 10% 0%, rgba(56,189,248,.22), transparent 60%),
              radial-gradient(900px 500px at 90% 30%, rgba(34,211,238,.18), transparent 55%),
              linear-gradient(180deg,#020617,#022c3a,#0b4a6f);
}

/* Sunset */
html[data-theme="sunset"] body{
  background: radial-gradient(1000px 600px at 20% 0%, rgba(251,191,36,.18), transparent 60%),
              radial-gradient(900px 600px at 80% 20%, rgba(244,63,94,.14), transparent 55%),
              linear-gradient(180deg,#0b1020,#2b1147,#6d1a2a);
}

/* Forest */
html[data-theme="forest"] body{
  background: radial-gradient(900px 520px at 20% 0%, rgba(34,197,94,.16), transparent 60%),
              radial-gradient(900px 520px at 80% 30%, rgba(16,185,129,.12), transparent 55%),
              linear-gradient(180deg,#04100a,#052e16,#064e3b);
}

/* Midnight (purple/blue premium-ish) */
html[data-theme="midnight"] body{
  background: radial-gradient(1000px 520px at 15% 0%, rgba(99,102,241,.18), transparent 60%),
              radial-gradient(900px 520px at 85% 25%, rgba(168,85,247,.14), transparent 55%),
              linear-gradient(180deg,#020617,#111827,#1e1b4b);
}

/* ===== FW_LIGHT_MODE_AND_RN_SIZE ===== */

/* Light theme: flip the palette so cards/text work on bright backgrounds */
html[data-theme="light"]{
  --bg1:#f8fafc; --bg2:#eef2ff; --bg3:#e2e8f0;
  --card:rgba(2,6,23,.06);
  --border:rgba(2,6,23,.12);
  --muted:rgba(2,6,23,.70);
  --ring:rgba(2,6,23,.12);
}
html[data-theme="light"] body{ color:#020617; }
html[data-theme="light"] .btn.primary{ background:#020617; color:#fff; }
html[data-theme="light"] .row{ background:rgba(2,6,23,.04); }
html[data-theme="light"] .card{ box-shadow: 0 10px 30px rgba(2,6,23,.08); }

/* Right-now size slider (0/1/2) */
body.rn-size-0 .temp{ font-size:42px; }
body.rn-size-1 .temp{ font-size:48px; } /* default */
body.rn-size-2 .temp{ font-size:56px; }

body.rn-size-0 #place{ font-size:12px; }
body.rn-size-1 #place{ font-size:13px; }
body.rn-size-2 #place{ font-size:15px; font-weight:800; }

body.rn-size-0 #cond{ font-size:12px; }
body.rn-size-1 #cond{ font-size:13px; }
body.rn-size-2 #cond{ font-size:15px; font-weight:800; }

/* ===== FW_RIGHTNOW_SIZES ===== */
/* Slider sets body.rn-size-0/1/2. These make the Right Now card text change. */

body.rn-size-0 .temp{ font-size:42px; }
body.rn-size-1 .temp{ font-size:48px; }
body.rn-size-2 .temp{ font-size:56px; }

body.rn-size-0 #place{ font-size:12px; }
body.rn-size-1 #place{ font-size:13px; }
body.rn-size-2 #place{ font-size:15px; font-weight:800; }

body.rn-size-0 .card h2{ font-size:12px; }
body.rn-size-1 .card h2{ font-size:13px; }
body.rn-size-2 .card h2{ font-size:14px; }


/* ===== FW_THEME_VARIABLES ===== */
/* Theme is controlled by: <html data-theme="..."> */
html[data-theme="light"]{
  --bg1:#f8fafc; --bg2:#f1f5f9; --bg3:#e2e8f0;
  --card:rgba(2,6,23,.06);
  --border:rgba(2,6,23,.14);
  --muted:rgba(2,6,23,.72);
  --ring:rgba(2,6,23,.14);
  color-scheme: light;
}
html[data-theme="light"] body{ color:#0b1220; }
html[data-theme="light"] .btn.primary{ background:#0b1220; color:#fff; }

/* Make sure “row” backgrounds aren’t too faint in light mode */
html[data-theme="light"] .row{ background:rgba(2,6,23,.05); }

/* Optional: slightly darker muted text in light mode */
html[data-theme="light"] .muted{ color:rgba(2,6,23,.72); }

/* ===== FW_RIGHTNOW_SIZES ===== */
/* These apply everywhere (Home included), as long as Home doesn’t override them */
body.rn-size-0 .temp{ font-size:40px !important; }
body.rn-size-1 .temp{ font-size:52px !important; }
body.rn-size-2 .temp{ font-size:66px !important; }

body.rn-size-0 #place{ font-size:13px !important; }
body.rn-size-1 #place{ font-size:15px !important; font-weight:800 !important; }
body.rn-size-2 #place{ font-size:17px !important; font-weight:900 !important; }

body.rn-size-0 #cond{ font-size:13px !important; }
body.rn-size-1 #cond{ font-size:15px !important; font-weight:800 !important; }
body.rn-size-2 #cond{ font-size:17px !important; font-weight:900 !important; }


/* ===== FW_HOME_FIX_V1 ===== */
/* Ensure themes can override homepage even if homepage has inline CSS */
html[data-theme="dark"]    { }
html[data-theme="light"]   { }
html[data-theme="ocean"]   { }
html[data-theme="sunset"]  { }
html[data-theme="forest"]  { }
html[data-theme="midnight"]{ }

/* Make body obey theme background via --page-bg */
body{
  background: var(--page-bg, linear-gradient(to bottom,var(--bg1),var(--bg2),var(--bg3))) !important;
}

/* Fix light-mode readability */
html[data-theme="light"] :root,
html[data-theme="light"]{
  --muted: rgba(0,0,0,.72);
  --border: rgba(0,0,0,.12);
  --card: rgba(255,255,255,.78);
  --ring: rgba(0,0,0,.12);
}
html[data-theme="light"] body{ color:#0b1220; }
html[data-theme="light"] .card{ background: var(--card) !important; border-color: var(--border) !important; }
html[data-theme="light"] .muted{ color: var(--muted) !important; }

/* Force “Right now” size slider to work on homepage */
body.rn-size-0 .temp{ font-size:38px !important; }
body.rn-size-1 .temp{ font-size:48px !important; }
body.rn-size-2 .temp{ font-size:60px !important; }
body.rn-size-0 #place, body.rn-size-0 #cond{ font-size:12px !important; }
body.rn-size-1 #place, body.rn-size-1 #cond{ font-size:13px !important; }
body.rn-size-2 #place, body.rn-size-2 #cond{ font-size:15px !important; font-weight:800 !important; }

/* Hide legacy/old icon blocks if they exist (keeps new svg icon) */
#wx-visual, .wxArt, .wxMoon, .wxSun, .wxCloud, .wxFog, .wxBolt, .wxStars, .wxRain, .wxSnow{
  display:none !important;
}

/* ===== FW_PAGE_BG_VARS ===== */
/* Home page uses background: var(--page-bg, ...) so themes must set --page-bg */

html[data-theme="dark"]{
  --page-bg: linear-gradient(to bottom, #020617, #020617, #0f172a);
  color-scheme: dark;
}

html[data-theme="light"]{
  --page-bg: linear-gradient(180deg, #f8fafc, #eef2ff, #e0f2fe);
  color-scheme: light;
}

html[data-theme="ocean"]{
  --page-bg:
    radial-gradient(1200px 600px at 10% 0%, rgba(56,189,248,.22), transparent 60%),
    radial-gradient(900px 500px at 90% 30%, rgba(34,211,238,.18), transparent 55%),
    linear-gradient(180deg,#020617,#022c3a,#0b4a6f);
}

html[data-theme="sunset"]{
  --page-bg:
    radial-gradient(1000px 600px at 20% 0%, rgba(251,191,36,.18), transparent 60%),
    radial-gradient(900px 600px at 80% 20%, rgba(244,63,94,.14), transparent 55%),
    linear-gradient(180deg,#0b1020,#2b1147,#6d1a2a);
}

html[data-theme="forest"]{
  --page-bg:
    radial-gradient(900px 520px at 20% 0%, rgba(34,197,94,.16), transparent 60%),
    radial-gradient(900px 520px at 80% 30%, rgba(16,185,129,.12), transparent 55%),
    linear-gradient(180deg,#04100a,#052e16,#064e3b);
}

html[data-theme="midnight"]{
  --page-bg:
    radial-gradient(1000px 520px at 15% 0%, rgba(99,102,241,.18), transparent 60%),
    radial-gradient(900px 520px at 85% 25%, rgba(168,85,247,.14), transparent 55%),
    linear-gradient(180deg,#020617,#111827,#1e1b4b);
}

/* ===== FW_FAB5_FORECAST_ICONS ===== */
.forecastRow{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}
.forecastLeft{
  display:flex;
  align-items:center;
  gap:10px;
  min-width:0;
}
.forecastIcon{
  width:22px;height:22px;
  opacity:.95;
  flex:0 0 auto;
}
.cityMeta{
  display:inline-flex;
  align-items:center;
  gap:8px;
  font-weight:900;
}
.cityIcon{
  width:18px;height:18px;
  opacity:.95;
}

/* ================================
   FW_READABILITY_PATCH_V1 (LAST WINS)
   Purpose: fix contrast + text readability across themes,
   especially light mode, without refactoring the whole file.
   ================================ */

:root{
  /* semantic tokens */
  --text: rgba(255,255,255,.94);
  --muted: rgba(255,255,255,.78);
  --card: rgba(255,255,255,.06);
  --border: rgba(255,255,255,.14);
  --rowbg: rgba(255,255,255,.06);
  --focus: rgba(255,255,255,.35);

  /* typography */
  --font-sans: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
}

/* Make text consistently readable */
body{
  font-family: var(--font-sans);
  color: var(--text);
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.muted, .subtitle{ color: var(--muted) !important; }

/* Ensure cards + rows have enough contrast everywhere */
.card{
  background: var(--card) !important;
  border-color: var(--border) !important;
}
.row{
  background: var(--rowbg) !important;
}

/* Buttons should stay readable on any theme */
.btn{ border-color: var(--border) !important; }
.btn:focus, button.city:focus{
  outline: 2px solid var(--focus) !important;
  outline-offset: 2px !important;
}

/* ---------- Theme-specific overrides ---------- */

/* Dark-ish themes */
html[data-theme="dark"],
html[data-theme="midnight"],
html[data-theme="dusk"],
html[data-theme="ocean"],
html[data-theme="sunset"],
html[data-theme="forest"]{
  --text: rgba(255,255,255,.94);
  --muted: rgba(255,255,255,.80);
  --card: rgba(255,255,255,.06);
  --border: rgba(255,255,255,.14);
  --rowbg: rgba(255,255,255,.06);
  --focus: rgba(255,255,255,.40);
}

/* Light theme: flip palette + keep “muted” readable */
html[data-theme="light"]{
  color-scheme: light;
  --text: rgba(2,6,23,.95);
  --muted: rgba(2,6,23,.72);
  --card: rgba(255,255,255,.82);
  --border: rgba(2,6,23,.14);
  --rowbg: rgba(2,6,23,.06);
  --focus: rgba(2,6,23,.28);
}

html[data-theme="light"] body{ color: var(--text) !important; }
html[data-theme="light"] .btn{ color: var(--text) !important; }
html[data-theme="light"] .btn.primary{ background:#0b1220 !important; color:#fff !important; }

/* Make the “pill” chips readable in light mode too */
html[data-theme="light"] .pill{
  background: rgba(2,6,23,.04) !important;
  border-color: rgba(2,6,23,.14) !important;
  color: rgba(2,6,23,.88) !important;
}

/* ===== FW_DASHBOARD_HEADER_FIX =====
   Keeps dashboard title left, buttons right, and prevents any stray element from pushing the heading.
*/
body[data-page="dashboard"] header,
body.dashboard header,
html[data-page="dashboard"] header{
  display:flex;
  flex-wrap:wrap;
  justify-content:space-between;
  align-items:flex-end;
  gap:16px;
}
body[data-page="dashboard"] header .actions,
body.dashboard header .actions,
html[data-page="dashboard"] header .actions{
  margin-left:auto;
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  justify-content:flex-end;
}
body[data-page="dashboard"] header h1,
body.dashboard header h1,
html[data-page="dashboard"] header h1{
  max-width: 760px;
}
.fwFooter{margin-top:48px;font-size:12px;opacity:.75}
.fwFooterInner{display:flex;gap:12px;flex-wrap:wrap;justify-content:space-between;align-items:center}
.fwFooterLinks a{opacity:.9}
.fwFooterLinks a:hover{opacity:1;text-decoration:underline}

/* ===== FW_DASHBOARD_PLAN_EVENT_FIX =====
   Fixes: "Plan an event" (header/title area) getting shoved right.
   Strategy: stack header content on dashboard, keep actions aligned left/right cleanly.
*/
body.dashboard header{
  display:flex !important;
  flex-direction:column !important;
  align-items:flex-start !important;
  gap:12px !important;
}
body.dashboard header .actions{
  width:100% !important;
  display:flex !important;
  flex-wrap:wrap !important;
  gap:8px !important;
  justify-content:flex-end !important; /* buttons go right */
}
body.dashboard header h1,
body.dashboard header .kicker,
body.dashboard header .subtitle{
  width:100% !important;   /* title stays left, full width */
  text-align:left !important;
}

/* ===== FW_HOME_EVENT_TILES ===== */
.eventTiles{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
  gap:10px;
  margin-top:10px;
}
.eventTile{
  border-radius:14px;
  padding:10px 12px;
  border:1px solid rgba(255,255,255,.14);
  background:rgba(255,255,255,.05);
  display:flex;
  flex-direction:column;
  gap:6px;
  min-height:64px;
}
.eventTile .top{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:10px;
}
.eventTile .name{
  font-weight:900;
  font-size:13px;
  line-height:1.2;
}
.eventTile .when{
  font-size:12px;
  opacity:.85;
  white-space:nowrap;
}
.eventTile .meta{
  font-size:12px;
  opacity:.72;
  line-height:1.25;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
}
.eventTile.is-green{
  border-color: rgba(34,197,94,.35);
  background: rgba(34,197,94,.14);
}
.eventTile.is-yellow{
  border-color: rgba(245,158,11,.35);
  background: rgba(245,158,11,.14);
}
.eventTile.is-red{
  border-color: rgba(239,68,68,.40);
  background: rgba(239,68,68,.14);
}
